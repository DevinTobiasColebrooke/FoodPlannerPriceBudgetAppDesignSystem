// svg_lookbook.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Planner Design System - SVG Lookbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { background-color: #E7F1D3; font-family: 'Poppins', sans-serif; color: #111827; margin: 0; }
        .ds-container-wrapper { padding: 1.5rem; }
        .ds-container { max-width: 1200px; margin-left: auto; margin-right: auto; background-color: white; border-radius: 0.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; min-height: calc(100vh - 3rem); }
        .ds-sidebar { width: 240px; flex-shrink: 0; background-color: #f0f4e8; padding: 1.5rem 1rem; border-right: 1px solid #d1d5db; }
        .ds-sidebar h1 { margin-bottom: 1.5rem; padding-bottom: 0.75rem; border-bottom: 1px solid #BDDA83; }
        .ds-sidebar nav a { display: block; padding: 0.6rem 0.75rem; margin-bottom: 0.3rem; border-radius: 0.375rem; color: #333333; text-decoration: none; font-size: 0.9rem; transition: background-color 0.2s ease, color 0.2s ease; }
        .ds-sidebar nav a:hover { background-color: #BDDA83; color: #111827; }
        .ds-sidebar nav a.active { background-color: #5AD479; color: white; font-weight: 500; }
        .ds-main-content { flex-grow: 1; padding: 2rem 2.5rem; overflow-y: auto; }
        h1.ds-page-title { color: #333333; margin-bottom: 1.5rem; padding-bottom: 0.75rem; border-bottom: 2px solid #5AD479; }
        h2.ds-section-title { color: #333333; margin-top: 2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #BDDA83; }
        h3.ds-subsection-title { color: #333333; margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .font-display { font-family: "Oddly Calming", cursive; }
        .text-shadow-dark { text-shadow: 0px 1px 3px rgba(0, 0, 0, 0.2); }
        section.ds-section { margin-bottom: 2.5rem; }
        code { background-color: #f3f4f6; padding: 0.2em 0.4em; margin: 0; font-size: 0.9em; border-radius: 0.25rem; color: #4b5563; }
        pre { background-color: #f3f4f6; padding: 1em; border-radius: 0.375rem; overflow-x: auto; margin-top: 0.5em; margin-bottom: 1em; }
        pre code { background-color: transparent; padding: 0; }
        .icon-lookbook-item { display: flex; flex-direction: column; align-items: center; text-align: center; padding: 1rem; border: 1px solid #e5e7eb; border-radius: 0.375rem; background-color: #f9fafb; min-height: 120px; }
        .icon-lookbook-item img { margin-bottom: 0.75rem; max-width: 64px; max-height: 64px; object-fit: contain; flex-grow: 1; }
        .icon-lookbook-item span { font-size: 0.75rem; color: #6b7280; word-break: break-all; margin-top: auto; line-height: 1.2; }
        .loading-message { font-size: 1.125rem; text-align: center; padding: 2rem; color: #6b7280; }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Poppins', 'sans-serif'], display: ['"Oddly Calming"', 'cursive'], },
                    colors: {
                        'fp-body-bg': '#E7F1D3', 'fp-primary-green': '#5AD479', 'fp-primary-green-dark': '#34C759',
                        'fp-accent-blue': '#5A6AD4', 'fp-accent-yellow': '#F0AB1F', 'fp-accent-yellow-alt': '#D4D45A',
                        'fp-accent-orange': '#FD7E14', 'fp-footer-bg': '#BDDA83',
                        'fp-neutral-text': '#111827', 'fp-neutral-text-light': '#6B7280', 'fp-neutral-darkest': '#333333',
                        'fp-neutral': '#9CA3AF', 'fp-neutral-dark': '#6B7280', 'fp-neutral-medium': '#D1D5DB',
                        'fp-neutral-light': '#F9FAFB', 'fp-neutral-lightest': '#FBFDF8', 'fp-white': '#FFFFFF',
                        'fp-success': '#28A745', 'fp-success-bg': '#D4EDDA', 'fp-error': '#DC3545', 'fp-error-bg': '#F8D7DA',
                        'fp-warning': '#FFC107', 'fp-warning-bg': '#FFF3CD', 'fp-info': '#17A2B8', 'fp-info-bg': '#D1ECF1',
                        'fp-tag1-bg': '#F3F6D6', 'fp-tag1-text': '#F0AB1F',
                    },
                    boxShadow: {
                        'fp-cta': '0 2px 4px rgba(0, 0, 0, 0.1)',
                        'fp-card': '0 4px 8px rgba(0, 0, 0, 0.08)',
                        'fp-modal': '0 8px 24px rgba(0, 0, 0, 0.15)',
                    },
                    borderRadius: { 'fp': '0.5rem', },
                    borderColor: theme => ({ ...theme('colors'), DEFAULT: theme('colors.gray.300', 'currentColor'), 'fp-primary-green': '#5AD479', }),
                    ringColor: theme => ({ ...theme('colors'), DEFAULT: theme('colors.blue.500', '#5A6AD4'), 'fp-primary-green': '#5AD479', })
                }
            },
            plugins: [],
        }
    </script>
</head>
<body>
    <div class="ds-container-wrapper">
        <div class="ds-container">
            <aside class="ds-sidebar">
                <h1 class="font-display text-xl text-fp-neutral-darkest">Food Planner DS</h1>
                <nav>
                    <a href="index.html">Introduction</a>
                    <a href="typography.html">Typography</a>
                    <a href="colors.html">Color Palette</a>
                    <a href="buttons.html">Buttons</a>
                    <a href="forms.html">Forms & Inputs</a>
                    <a href="shadows.html">Shadows</a>
                    <a href="layout.html">Layout Notes</a>
                    <a href="icons.html">Icons</a>
                    <a href="svg_lookbook.html" class="active">SVG Lookbook</a>
                    <a href="data_display_tables.html">Data & Tables</a>
                    <a href="cards.html">Cards</a>
                    <a href="modals.html">Modals</a>
                    <a href="alerts_notifications.html">Alerts & Notifications</a>
                    <a href="tooltips_citations.html">Tooltips & Citations</a>
                    <a href="specialized_components.html">Specialized Components</a>
                    <a href="./loading_indicators.html">Loading Indicators</a>
                    <a href="./ratings_pickers.html">Ratings & Pickers</a>
                    <a href="./calendar_view.html">Calendar View</a>
                </nav>
            </aside>
            <main class="ds-main-content">
                <h1 class="ds-page-title font-display text-4xl">SVG Lookbook</h1>
                <p class="mb-6 text-fp-neutral-text">
                    This page dynamically loads and displays all SVGs listed in <code>svg_lookbook_paths.txt</code>.
                    Icons are grouped by their respective packs (subdirectories).
                </p>
                <div id="svg-lookbook-container" class="space-y-10">
                    <p class="loading-message">Loading SVGs...</p>
                </div>
            </main>
        </div>
    </div>
    <script>
        // Script to dynamically set active class on nav links
        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navLinks = document.querySelectorAll('.ds-sidebar nav a');
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });

            // Fetch and display SVGs
            const lookbookContainer = document.getElementById('svg-lookbook-container');
            if (lookbookContainer) {
                fetch('../svg_lookbook_paths.txt')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! ${response.status}`);
                        }
                        return response.text();
                    })
                    .then(text => {
                        const paths = text.split('\n').map(p => p.trim()).filter(p => p && !p.startsWith('#'));
                        displaySvgs(paths, lookbookContainer);
                    })
                    .catch(error => {
                        console.error('Error fetching or parsing SVG paths:', error);
                        lookbookContainer.innerHTML = `<p class="loading-message text-fp-error">Error loading SVGs: ${error.message}. Please ensure 'svg_lookbook_paths.txt' is accessible.</p>`;
                    });
            }
        });

        function displaySvgs(paths, container) {
            container.innerHTML = ''; // Clear loading message

            const groupedPaths = {};
            paths.forEach(path => {
                const parts = path.split('/');
                let groupName = "Root SVGs"; // Default for svgs directly in svgs/
                if (parts.length > 2 && parts[0] === 'svgs' && parts[2] === 'svg') { // e.g. svgs/pack-name/svg/icon.svg
                    groupName = parts[1]; // The pack name
                } else if (parts.length > 1 && parts[0] === 'svgs') {
                     // If it's svgs/something.svg, it's a root SVG.
                     // If it's svgs/pack-name/icon.svg (without the extra svg folder)
                     // we can consider pack-name as the group.
                     // Let's refine this for paths like svgs/pack-name/ (which was in the example for Italian food, although the actual files are in svgs/pack-name/svg/)
                     if (parts.length > 2 && parts[parts.length-1].includes('.')) { // svgs/pack-name/icon.svg
                        groupName = parts[1];
                     } else if (parts.length === 2 && !parts[1].includes('.')) { // svgs/pack-name/ (potentially a directory entry in the file)
                        groupName = parts[1];
                     }
                }


                if (!groupedPaths[groupName]) {
                    groupedPaths[groupName] = [];
                }
                // Only add if it's a .svg file
                if (path.toLowerCase().endsWith('.svg')) {
                    groupedPaths[groupName].push(path);
                }
            });

            // Sort group names, "Root SVGs" first
            const sortedGroupNames = Object.keys(groupedPaths).sort((a, b) => {
                if (a === "Root SVGs") return -1;
                if (b === "Root SVGs") return 1;
                return a.localeCompare(b);
            });

            if (sortedGroupNames.length === 0) {
                container.innerHTML = `<p class="loading-message">No SVG paths found in the file.</p>`;
                return;
            }

            sortedGroupNames.forEach(groupName => {
                if (groupedPaths[groupName].length === 0) return; // Skip empty groups (e.g. if only a directory was listed)

                const section = document.createElement('section');
                section.className = 'ds-section';

                const title = document.createElement('h2');
                title.className = 'ds-section-title font-display text-2xl';
                title.textContent = groupName.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()); // Capitalize and format
                section.appendChild(title);

                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4';
                
                groupedPaths[groupName].sort().forEach(path => {
                    const item = document.createElement('div');
                    item.className = 'icon-lookbook-item';

                    const img = document.createElement('img');
                    img.src = '../' + path;
                    img.alt = path.split('/').pop(); // Filename as alt
                    // Add error handling for images
                    img.onerror = function() {
                        this.alt = `Error loading: ../${path}`; // Reflect the attempted path
                        this.src = ''; // Clear broken image icon, or set a placeholder
                        // Optionally add more distinct styling for broken images
                        item.classList.add('border-fp-error', 'bg-fp-error-bg');
                        const errorText = item.querySelector('span');
                        if(errorText) errorText.classList.add('text-fp-error');

                    };

                    const nameSpan = document.createElement('span');
                    nameSpan.textContent = path.split('/').pop(); // Filename

                    item.appendChild(img);
                    item.appendChild(nameSpan);
                    grid.appendChild(item);
                });

                section.appendChild(grid);
                container.appendChild(section);
            });
        }
    </script>
</body>
</html>